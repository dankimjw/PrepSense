{
  "analysis_timestamp": "2025-08-04T12:45:41.748441",
  "structural_integrity": {
    "table_existence": {
      "usda_foods": true,
      "usda_food_categories": true,
      "usda_measure_units": true,
      "usda_nutrients": true,
      "usda_food_nutrients": false,
      "usda_food_portions": false,
      "usda_category_unit_mappings": true
    },
    "foreign_key_health": "SKIPPED - Required tables not found",
    "primary_key_density": {
      "total_rows": 122,
      "distinct_ids": 122,
      "density_ratio": 1.0,
      "status": "PASS"
    },
    "null_hotspots": "SKIPPED - usda_food_portions table not found"
  },
  "coverage_analysis": {
    "total_unique_pantry_items": 100,
    "pantry_coverage": {
      "total_sampled": 100,
      "matched_items": 39,
      "unmatched_items": 61,
      "match_ratio_percent": 39.0,
      "status": "NEEDS_IMPROVEMENT",
      "sample_unmatched": [
        "colavita extra virgin olive oil",
        "yellow bell pepper",
        "corn on the cob",
        "pacific organic low sodium chicken broth",
        "trader joe's blueberry cereal bars",
        "trader joe's italian farfalle",
        "trader joe's italian fusilli",
        "trader joe's italian linguine",
        "trader joe's italian macaroni",
        "trader joe's organic joe's o's"
      ]
    }
  },
  "unit_distribution": {
    "rare_preferred_units": [],
    "duplicate_units": []
  },
  "performance_metrics": {
    "category_lookup_ms": 72.94,
    "unit_validation_ms": 112.29,
    "validation_function_exists": true,
    "performance_status": {
      "category_lookup": "NEEDS_IMPROVEMENT",
      "unit_validation": "NEEDS_IMPROVEMENT"
    }
  },
  "functional_tests": {
    "status": "SKIPPED - validate_unit_for_food function not found"
  },
  "recommendations": [
    {
      "priority": "HIGH",
      "category": "Missing Tables",
      "issue": "Missing USDA tables: usda_food_nutrients, usda_food_portions",
      "action": "Run USDA data import scripts to create missing tables",
      "impact": "Unit validation system will not function"
    },
    {
      "priority": "MEDIUM",
      "category": "Coverage",
      "issue": "Only 39.0% of pantry items match USDA foods",
      "action": "Create alias table for pantry \u2192 FDC lookup gaps or improve matching algorithm",
      "impact": "Poor unit validation coverage for actual user items"
    },
    {
      "priority": "MEDIUM",
      "category": "Performance",
      "issue": "Category lookup taking 72.94ms",
      "action": "Add index on (category_id, usage_percentage DESC)",
      "impact": "Slow API response times"
    },
    {
      "priority": "HIGH",
      "category": "Functionality",
      "issue": "Unit validation tests 0% success rate",
      "action": "Debug and fix unit validation function logic",
      "impact": "Unit validation returning incorrect results"
    },
    {
      "priority": "HIGH",
      "category": "System Status",
      "issue": "Found 2 critical issues",
      "action": "Schedule data-quality remediation sprint",
      "impact": "System not ready for production use"
    }
  ]
}